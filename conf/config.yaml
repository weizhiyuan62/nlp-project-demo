# 智览系统 Hydra 主配置文件

defaults:
  - api: default
  - _self_

# 项目基本信息
project:
  name: "智览信息聚合系统"
  version: "2.0.0"

# 信息采集配置
collection:
  topics:
    - "AI development"
    - "Climate change"
    - "Global economy"
  
  # 时间范围 (today, last_3_days, last_week, custom)
  time_range: "last_3_days"
  
  # 自定义日期范围 (仅当time_range为custom时使用)
  custom_start_date: "2025-12-20"
  custom_end_date: "2025-12-23"
  
  # 信息源偏好
  sources:
    official_media: true
    academic: true
    social_media: false
  
  # 每个主题最大采集数量
  max_items_per_topic: 30

# 分析配置
analysis:
  # 信息评分维度
  scoring:
    relevance_weight: 0.3      # 相关性权重
    importance_weight: 0.3     # 重要性权重
    timeliness_weight: 0.2     # 时效性权重
    reliability_weight: 0.2    # 可靠性权重
  
  # 过滤阈值
  min_score: 0.6
  
  # 去重相似度阈值
  similarity_threshold: 0.85

# 报告配置
report:
  # 报告风格 (brief, detailed, academic)
  style: "detailed"
  
  # 报告语言
  language: "zh-CN"
  
  # 报告结构
  sections:
    - "executive_summary"      # 执行摘要
    - "key_events"            # 重点事件解读
    - "overall_analysis"      # 总体分析（新增）
    - "trend_analysis"        # 趋势分析
    - "statistics"            # 数据统计
    - "recommendations"       # 相关建议
  
  # 可视化配置
  visualization:
    wordcloud: true           # 生成词云
    timeline: true            # 生成时间线
    source_distribution: true # 生成信息源分布图
    topic_network: true       # 生成主题关联网络图

# 输出配置
output:
  # 输出格式
  formats:
    - "markdown"
    - "pdf"
  
  # 结果存放目录（相对于每次运行的 Hydra 输出目录）
  results_dir: "results"
  
  # 资源路径
  assets_dir: "assets"
  
  # PDF生成配置
  pdf:
    compiler: "xelatex"  # pdflatex, xelatex
    template: "default"  # 使用的LaTeX模板名称

# 错误处理配置
error_handling:
  # API调用重试配置
  retry:
    max_attempts: 3
    backoff_factor: 2  # 指数退避因子
    initial_delay: 1   # 初始延迟(秒)

# Hydra 配置
hydra:
  run:
    # 运行目录按日期和时间分类
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  
  sweep:
    dir: outputs/multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}
  
  job:
    chdir: true  # 切换到输出目录运行
  
  # 日志配置
  job_logging:
    version: 1
    formatters:
      simple:
        format: '%(asctime)s - 智览系统v${project.version} - %(levelname)s - %(message)s'
        datefmt: '%Y-%m-%d %H:%M:%S'
      colored:
        (): colorlog.ColoredFormatter
        format: '%(log_color)s%(asctime)s - 智览系统v${project.version} - %(levelname)s - %(message)s'
        datefmt: '%Y-%m-%d %H:%M:%S'
        log_colors:
          DEBUG: cyan
          INFO: green
          WARNING: yellow
          ERROR: red
          CRITICAL: red,bg_white
    handlers:
      console:
        class: logging.StreamHandler
        formatter: colored
        stream: ext://sys.stdout
      file:
        class: logging.FileHandler
        formatter: simple
        filename: zhilan.log
        encoding: utf-8
    root:
      level: INFO
      handlers:
        - console
        - file
    disable_existing_loggers: false
